function sendToAnimate(e){animateCoin(e)}function showPopup(){popup.classList.contains("hidden")&&popup.classList.remove("hidden")}function hidePopup(){popup.classList.contains("hidden")||popup.classList.add("hidden")}function animateCoin(e){var n=generateCode();setPromoCookie(n),setTimeCookie();var o=getItemWithCode(n),t=document.querySelector("span.drink"),i=document.querySelector("span.count"),a="";"wine"==o.icon?a="víno":"beer"==o.icon?a="pivo":"champagne"==o.icon&&(a="šampaňské"),t.innerText=a,i.innerText=o.name,setValueToPopup(o.name),setUrlToCtas(o.code),e.target.classList.remove("shaking"),e.target.classList.add("flipOutY"),setTimeout(function(){e.target.classList.add(o.icon),e.target.classList.remove("flipOutY"),e.target.classList.add("flipInY")},500),ga("send","event","twisto-hra","chose-item",e.target.id),ga("send","pageview","/kampane/premen-vodu/"+e.target.id+"/"),setTimeout(function(){showPopup()},2500),glasses.forEach(function(e,n){e.removeEventListener("click",sendToAnimate),e.addEventListener("click",showPopup)})}function getHref(e,n){return e+(-1!==e.indexOf("/?")?"&":"?")+"promo="+n}function setValueToPopup(e){document.querySelector(".popup span.green").innerText=e}function setUrlToCtas(e){$('[href*="/registrace/"]').each(function(){var n=$(this),o=n.attr("href");n.attr("href",getHref(o,e))})}function generateCode(){var e=generateWeighedList(list,weight);return e[rand(0,e.length-1)]}function getItemWithCode(e){var n="";return my_list.forEach(function(o,t){o.code==e&&(n=o)}),ga("send","event","twisto-hra","won-"+n.name),ga("send","pageview","/kampane/premen-vodu/"+n.name+"/"),n}function setPromoCookie(e){window.localStorage.setItem("aZxYujkL",e)}function setTimeCookie(){var e=new Date;window.localStorage.setItem("xcKyUlV",e)}function getPromoCookie(){return window.localStorage.getItem("aZxYujkL")}function getTimeCookie(){return window.localStorage.getItem("xcKyUlV")}function recoverState(){var e=getItemWithCode(getPromoCookie()),n=document.querySelector(".glasses__img#wine");setUrlToCtas(e.code),setValueToPopup(e.name);var o=document.querySelector("span.drink"),t=document.querySelector("span.count"),i="";"wine"==e.icon?i="víno":"beer"==e.icon?i="pivo":"champagne"==e.icon&&(i="šampaňské"),o.innerText=i,t.innerText=e.name,n.classList.remove("shaking"),n.classList.add("flipOutY"),setTimeout(function(){n.classList.add(e.icon),n.classList.remove("flipOutY"),n.classList.add("flipInY")},500),glasses.forEach(function(e,n){e.removeEventListener("click",sendToAnimate),e.addEventListener("click",showPopup)})}var glasses=[].slice.call(document.querySelectorAll(".glasses__item")),popup=document.querySelector(".popup"),popup_close=document.querySelector(".popup__close"),weight=["0.01","0.01","0.03","0.04","0.05","0.05","0.06","0.06","0.06","0.06","0.06","0.06","0.06","0.09","0.12","0.16","0.01","0.01"];glasses.forEach(function(e,n){e.addEventListener("click",sendToAnimate)}),popup.addEventListener("click",function(e){e.target.classList.contains("popup")&&hidePopup()}),popup_close.addEventListener("click",hidePopup);var my_list=[{name:"100",code:"TF75PSM",icon:"beer"},{name:"110",code:"6REL6IH",icon:"beer"},{name:"120",code:"N72XR8Q",icon:"beer"},{name:"130",code:"46A24H7",icon:"beer"},{name:"140",code:"S0NLEU5",icon:"beer"},{name:"150",code:"EZG59M4",icon:"beer"},{name:"160",code:"DOK9WWM",icon:"wine"},{name:"170",code:"OABVHME",icon:"wine"},{name:"180",code:"MI7HD9Q",icon:"wine"},{name:"190",code:"MNNUB0M",icon:"wine"},{name:"200",code:"0ZP8F80",icon:"wine"},{name:"225",code:"6M2J3JT",icon:"wine"},{name:"250",code:"77W3UO1",icon:"wine"},{name:"300",code:"87D047M",icon:"wine"},{name:"450",code:"ELJQ6IY",icon:"champagne"},{name:"500",code:"TIZ8A0Z",icon:"champagne"},{name:"750",code:"TKQIXS4",icon:"champagne"},{name:"1000",code:"HHWRC1R",icon:"champagne"}],rand=function(e,n){return Math.floor(Math.random()*(n-e+1))+e},generateWeighedList=function(e,n){for(var o=[],t=0;t<n.length;t++)for(var i=100*n[t],a=0;a<i;a++)o.push(e[t]);return o},list=["TF75PSM","6REL6IH","N72XR8Q","46A24H7","S0NLEU5","EZG59M4","DOK9WWM","OABVHME","MI7HD9Q","MNNUB0M","0ZP8F80","6M2J3JT","77W3UO1","87D047M","ELJQ6IY","TIZ8A0Z","TKQIXS4","HHWRC1R"],all_affected_ctas=[].slice.call(document.querySelectorAll("a.button"));!function(){var e=Date.parse(getTimeCookie());new Date-e<864e5&&recoverState()}();